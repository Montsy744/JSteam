{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://jsteam/./src/Router.js","webpack://jsteam/./src/View.js","webpack://jsteam/./src/config.js","webpack://jsteam/./src/main.ts","webpack://jsteam/./src/HelpView.js","webpack://jsteam/./src/GameListView.js","webpack://jsteam/./src/renderGameThumbnail.ts","webpack://jsteam/./src/AboutView.js","webpack://jsteam/./src/GameDetailView.js"],"sourcesContent":["/**\n * Classe Router qui permet de gérer la navigation dans l'application sans rechargement de page.\n * (Single Page Application)\n */\nexport default class Router {\n\t/**\n\t * Tableau des routes/vues de l'application.\n\t * @example `Router.routes = [{ path: '/help', view: helpView, title: 'Support' }]`\n\t */\n\tstatic routes = [];\n\tstatic currentRoute;\n\n\tstatic titleElement;\n\tstatic #menuElement; // propriété statique et privée (#...)\n\n\t/**\n\t * Setter qui indique au `Router` la balise HTML contenant le menu de navigation.\n\t * Écoute le clic sur chaque lien et déclenche la méthode `Router.navigate`.\n\t * @param {Element} menuElement\n\t * @see Router.handleMenuLinkClick\n\t * @see Router.navigate\n\t */\n\tstatic setMenuElement(menuElement) {\n\t\tthis.#menuElement = menuElement;\n\t\t// on écoute le clic sur tous les liens du menu\n\t\tconst menuLinks = this.#menuElement.querySelectorAll('a');\n\t\tmenuLinks.forEach(link =>\n\t\t\tlink.addEventListener('click', event => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t// on récupère le href du lien cliqué pour déclencher navigate(...)\n\t\t\t\tconst linkHref = event.currentTarget.getAttribute('href');\n\t\t\t\tRouter.navigate(linkHref);\n\t\t\t})\n\t\t);\n\t}\n\t/**\n\t * Affiche la view correspondant à `path` dans le tableau `routes`\n\t * @param {String} path URL de la page à afficher\n\t * @param {Boolean} skipPushState active/désactive le pushState (gestion des boutons précédent/suivant du navigateur)\n\t */\n\tstatic navigate(path, skipPushState = false) {\n\t\tconst route = this.routes.find(route => {\n\t\t\t// TP4 / D. GameDetail : D.2. Récupération du jeu à afficher\n\t\t\t// Gestion du cas de la page \"Détail jeu\"\n\t\t\t// Si le path de la route termine par \"*\" comme dans \"/detail-*\"\n\t\t\tif (route.path.endsWith('*')) {\n\t\t\t\t// alors on vérifie si le path courant (l'URL demandée par l'internaute)\n\t\t\t\t// commence par la même chose que la route sans \"*\"\n\t\t\t\tconst routePathStart = route.path.replace('*', ''); // ex. \"/detail-\"\n\t\t\t\treturn path.startsWith(routePathStart); // \"/detail-mario-kart\" commence par \"/detail-\"\n\t\t\t} else {\n\t\t\t\t// en cas de route sans caractère \"*\" on teste juste l'égalité simple\n\t\t\t\t// entre le path (ex. \"/help\")\n\t\t\t\t// et le path de chaque route (\"/help\", \"/about\", \"/\", ...)\n\t\t\t\treturn route.path === path;\n\t\t\t}\n\t\t});\n\t\tif (route) {\n\t\t\t// on masque la vue précédente\n\t\t\tif (this.currentRoute) {\n\t\t\t\tthis.currentRoute.view.hide();\n\t\t\t}\n\t\t\tthis.currentRoute = route;\n\t\t\t// TP4 / D. GameDetail : D.2. Récupération du jeu à afficher\n\t\t\t// on affiche la nouvelle vue\n\t\t\tlet viewParam;\n\t\t\tif (route.path.endsWith('*')) {\n\t\t\t\tconst routePathStart = route.path.replace('*', ''); // route.path = \"/detail-*\" -> routePathStart = \"/detail-\"\n\t\t\t\tconst pathEnd = path.replace(routePathStart, ''); // path = \"/detail-mario-kart\" -> pathEnd = \"mario-kart\"\n\t\t\t\tviewParam = pathEnd;\n\t\t\t}\n\t\t\troute.view.show(viewParam);\n\t\t\tthis.titleElement.innerHTML = `<h1>${route.title}</h1>`;\n\n\t\t\t// Activation/désactivation des liens du menu\n\t\t\tconst previousMenuLink = this.#menuElement.querySelector('a.active'),\n\t\t\t\tnewMenuLink = this.#menuElement.querySelector(`a[href=\"${path}\"]`);\n\t\t\tpreviousMenuLink?.classList.remove('active'); // on retire la classe \"active\" du précédent menu\n\t\t\tnewMenuLink?.classList.add('active'); // on ajoute la classe CSS \"active\" sur le nouveau lien\n\n\t\t\t// History API : ajout d'une entrée dans l'historique du navigateur\n\t\t\t// pour pouvoir utiliser les boutons précédent/suivant\n\t\t\tif (!skipPushState) {\n\t\t\t\twindow.history.pushState(null, null, path);\n\t\t\t}\n\t\t}\n\t}\n}\n","/**\n * Classe de base des vues de notre application.\n * Permet d'associer une balise HTML à la vue et de l'afficher/masquer.\n */\nexport default class View {\n\t/**\n\t * Balise HTML associée à la vue\n\t */\n\telement;\n\n\tconstructor(element) {\n\t\tthis.element = element;\n\t}\n\t/**\n\t * Affiche la vue en lui ajoutant la classe CSS `active`\n\t */\n\tshow() {\n\t\tthis.element.classList.add('active');\n\t}\n\t/**\n\t * Masque la vue en enlevant la classe CSS `active`\n\t */\n\thide() {\n\t\tthis.element.classList.remove('active');\n\t}\n}\n","// renseignez ici votre API KEY rawg.io\nexport const API_KEY = 'f953f810193748bd9d52d8fcadbcff0b';\n","import AboutView from './AboutView.js';\nimport GameDetailView from './GameDetailView.js';\nimport GameListView from './GameListView.js';\nimport HelpView from './HelpView.js';\nimport Router from './Router.js';\n\n// Modification du footer\ndocument.querySelector('body > footer > div:nth-of-type(2)')!.innerHTML +=\n\t' / CSS inspirée de <a href=\"https://store.steampowered.com/\">steam</a>';\n\n// création des vues de notre application\nconst helpView = new HelpView(document.querySelector('.viewContent .help')!);\nconst gameListView = new GameListView(\n\tdocument.querySelector('.viewContent > .gameList')\n);\nconst aboutView = new AboutView(\n\tdocument.querySelector('.viewContent > .about')\n);\nconst gameDetailView = new GameDetailView(\n\tdocument.querySelector('.viewContent > .gameDetail')\n);\n\n// mise en place du Router\nconst routes = [\n\t{ path: '/', view: gameListView, title: 'Magasin' },\n\t{ path: '/about', view: aboutView, title: 'À propos' },\n\t{ path: '/help', view: helpView, title: 'Support' },\n\t{ path: '/detail-*', view: gameDetailView, title: 'Détail jeu' },\n];\nRouter.routes = routes;\n// élément dans lequel afficher le <h1> de la vue\nRouter.titleElement = document.querySelector('.viewTitle');\n// gestion des liens du menu (détection du clic et activation/désactivation)\nRouter.setMenuElement(document.querySelector('.mainMenu')!);\n\n// chargement de la vue initiale selon l'URL demandée par l'utilisateur.rice (Deep linking)\nRouter.navigate(window.location.pathname, true);\n// gestion des boutons précédent/suivant du navigateur (History API)\nwindow.onpopstate = () => Router.navigate(document.location.pathname, true);\n\nfunction shoutify(value: string) {\n\treturn value.toUpperCase();\n}\nconsole.log( shoutify('You\\'re All Variants!') );\n","import View from './View.js';\n\nexport default class HelpView extends View {\n\t/**\n\t * Récupère et écoute le submit du formulaire contenu dans `element`\n\t * @param {Element} element balise HTML dans laquelle la vue peut s'afficher\n\t * @see #handleSubmit\n\t */\n\tconstructor(element) {\n\t\tsuper(element);\n\t\t// détection du submit du formulaire\n\t\tthis.element\n\t\t\t.querySelector('.helpForm')\n\t\t\t.addEventListener('submit', event => this.handleSubmit(event));\n\t}\n\n\t/**\n\t * Méthode déclenchée au submit du formulaire de la page \"Support\".\n\t * Vérifie si les champs sont correctement renseignés et lance la rédaction\n\t * d'un email prérempli avec les infos saisies par l'utilisateur.rice\n\t * @param {Event} event\n\t */\n\thandleSubmit(event) {\n\t\tevent.preventDefault();\n\t\t// récupération des 2 champs du formulaire\n\t\tconst subjectInput = this.element.querySelector('input[name=subject]');\n\t\tconst bodyTextarea = this.element.querySelector('textarea[name=body]');\n\t\t// récupération du texte saisi par l'utilisateur.rice\n\t\tconst subject = subjectInput.value,\n\t\t\tbody = bodyTextarea.value;\n\t\t// vérification des champs obligatoires\n\t\tif (subject === '') {\n\t\t\talert('le champ \"SUJET\" est obligatoire');\n\t\t\treturn;\n\t\t}\n\t\tif (body === '') {\n\t\t\talert('le champ \"VOTRE MESSAGE\" est obligatoire');\n\t\t\treturn;\n\t\t}\n\t\t// ouverture du client mail pour rédaction d'un email\n\t\twindow.location.href = `mailto:help@jsteam.fr?subject=${encodeURIComponent(\n\t\t\tsubject\n\t\t)}&body=${encodeURIComponent(body)}`;\n\t\t// on vide les champs\n\t\tsubjectInput.value = '';\n\t\tbodyTextarea.value = '';\n\t\t// on aurait aussi pu faire : form.reset();\n\t}\n}","import { API_KEY } from './config.js';\nimport renderGameThumbnail from './renderGameThumbnail';\nimport Router from './Router.js';\nimport View from './View.js';\n\nexport default class GameListView extends View {\n\tsearchForm;\n\ttoggleSearchButton;\n\n\tconstructor(element) {\n\t\tsuper(element);\n\t\t// détection du clic sur le bouton \"loupe\" pour afficher/masquer le form de recherche\n\t\tthis.toggleSearchButton = this.element.querySelector('.toggleSearchButton');\n\t\tthis.toggleSearchButton.addEventListener('click', event =>\n\t\t\tthis.toggleSearchForm(event)\n\t\t);\n\t\t// détection de la soumission du formulaire de recherche\n\t\tthis.searchForm = this.element.querySelector('.searchForm');\n\t\tthis.searchForm.addEventListener('submit', event =>\n\t\t\tthis.handleSearchFormSubmit(event)\n\t\t);\n\t}\n\n\tshow() {\n\t\tsuper.show();\n\t\t// affichage initial de la liste des jeux\n\t\tthis.renderGameList();\n\t}\n\n\t/**\n\t * Méthode d'affichage de la liste des jeux.\n\t * Utilisée :\n\t * - au chargement de la page pour l'affichage initial\n\t * - et à chaque fois qu'on soumet le formulaire de recherche\n\t * @param {string} search chaîne de caractère recherchée dans le nom des jeux\n\t * @param {string} ordering ordre d'affichage des résultats\n\t */\n\trenderGameList(search = '', ordering) {\n\t\tthis.element.querySelector('.results').classList.add('is-loading');\n\t\tthis.searchForm.querySelector('button').disabled = true;\n\t\tthis.searchForm.querySelector('button').setAttribute('disabled', true);\n\t\tfetch(\n\t\t\t`https://api.rawg.io/api/games?search=${encodeURIComponent(\n\t\t\t\tsearch\n\t\t\t)}&ordering=${encodeURIComponent(ordering)}&key=${API_KEY}`\n\t\t)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// rendu de la liste des jeux\n\t\t\t\tlet html = '';\n\t\t\t\tdata.results.forEach(game => (html += renderGameThumbnail(game)));\n\t\t\t\tthis.element.querySelector('.results').innerHTML = html;\n\t\t\t\t// suppression du \"loader\" et réactivation du formulaire\n\t\t\t\tthis.element.querySelector('.results').classList.remove('is-loading');\n\t\t\t\tthis.searchForm.querySelector('button').disabled = false;\n\t\t\t\t// détection du clic sur les vignettes de jeu\n\t\t\t\t// pour navigation vers la page détail (sans rechargement de page)\n\t\t\t\tconst gameLinks = this.element.querySelectorAll('.results > a');\n\t\t\t\tgameLinks.forEach(gameLink =>\n\t\t\t\t\tgameLink.addEventListener('click', event => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tRouter.navigate(gameLink.getAttribute('href'));\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t}\n\t/**\n\t * Fonction qui permet d'afficher ou masquer le formulaire de recherche\n\t * @param {Event} event événement déclenché par le bouton sur lequel on a cliqué\n\t */\n\ttoggleSearchForm(event) {\n\t\tconst isOpened = this.searchForm.getAttribute('style') !== 'display: none;';\n\t\tif (!isOpened) {\n\t\t\tthis.searchForm.setAttribute('style', '');\n\t\t\tthis.toggleSearchButton.classList.add('opened');\n\t\t} else {\n\t\t\tthis.searchForm.setAttribute('style', 'display: none;');\n\t\t\tthis.toggleSearchButton.classList.remove('opened');\n\t\t}\n\t}\n\t/**\n\t * Méthode déclenchée quand on soumet le formulaire de recherche.\n\t * Met à jour l'affichage des résultats.\n\t * @param {Event} event événement déclenché par le formulaire de recherche au submit\n\t * @see #renderGameList\n\t */\n\thandleSearchFormSubmit(event) {\n\t\tevent.preventDefault();\n\t\tconst searchInput = this.searchForm.querySelector('[name=search]'),\n\t\t\torderingSelect = this.searchForm.querySelector('[name=ordering]');\n\t\tthis.renderGameList(searchInput.value, orderingSelect.value);\n\t}\n}\n","import { info } from \"./type\";\n\nexport default function renderGameThumbnail(data:info) {\n\tconst releasedDate = new Date(data.released);\n\treturn `<a href=\"/detail-${data.slug}\">\n\t\t\t\t<img src=\"${data.background_image || '/images/default-thumbnail.svg'}\" />\n\t\t\t\t<footer>\n\t\t\t\t\t<h3>${data.name}</h3>\n\t\t\t\t\t<div class=\"infos\">\n\t\t\t\t\t\t<time datetime=\"${data.released}\">${releasedDate.toLocaleDateString()}</time>\n\t\t\t\t\t\t<span class=\"metacritic\">${data.metacritic || ''}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</footer>\n\t\t\t</a>`;\n}\n","import Router from './Router.js';\nimport View from './View.js';\n\n/**\n * Classe de la page \"A propos\"\n * Codée dans le TP4 / B. Charger un fichier statique\n */\nexport default class AboutView extends View {\n\tshow() {\n\t\tsuper.show();\n\t\t// quand on affiche la page, on charge le fichier `about.html`\n\t\t// on pourrait optimiser ici le fonctionnement en ne le chargeant qu'une seule fois\n\t\t// (pour le moment à chaque fois qu'on affiche la view, une nouvelle requête AJAX est déclenchée)\n\t\tfetch('./about.html')\n\t\t\t.then(response => response.text()) // on récupère le texte brut contenu dans le fichier\n\t\t\t.then(responseText => this.showFileContent(responseText)); // on traite le texte contenu dans le fichier\n\t}\n\n\t/**\n\t * Injecte dans la page HTML le code passé en paramètre.\n\t * Ajoute également un écouteur d'événement \"click\" sur le bouton \"nous contacter\"\n\t * @param {string} html code html à injecter dans la page (issu du contenu de la page about.html chargée avec fetch)\n\t * @see #show\n\t * @see #handleButtonClick\n\t */\n\tshowFileContent(html) {\n\t\tthis.element.innerHTML = html;\n\t\t// l'ajout d'écouteur d'événement ne peut se faire qu'une fois que la page HTML a été modifiée\n\t\t// (sinon le bouton n'existe pas encore)\n\t\tthis.element\n\t\t\t.querySelector('.button')\n\t\t\t.addEventListener('click', event => this.handleButtonClick(event));\n\t}\n\t/**\n\t * Méthode déclenchée par le click sur le bouton \"Nous contacter\"\n\t * @param {Event} event\n\t * @see #showFileContent\n\t */\n\thandleButtonClick(event) {\n\t\tevent.preventDefault();\n\t\tRouter.navigate('/help');\n\t}\n}\n","import { API_KEY } from './config.js';\nimport Router from './Router.js';\nimport View from './View.js';\n\nexport default class GameDetailView extends View {\n\tgame;\n\tscreenshots;\n\n\t/**\n\t * Affiche la vue et lance la récupération des infos du jeu à afficher.\n\t * @param {string} slug identifiant (slug) du jeu à afficher\n\t */\n\tshow(slug) {\n\t\tsuper.show();\n\t\t// ajout de l'état \"loading\"\n\t\tthis.element.classList.add('is-loading');\n\t\t// création des URL de l'API pour le détail et les screenshots\n\t\tconst detailApiUrl =\n\t\t\t\t`https://api.rawg.io/api/games/` + encodeURIComponent(slug),\n\t\t\tscreenshotsApiUrl = detailApiUrl + '/screenshots',\n\t\t\tapiKeyParam = `?key=${API_KEY}`;\n\t\t// récupération du détail d'un jeu\n\t\tfetch(detailApiUrl + apiKeyParam)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => (this.game = data)) // enregistrement dans this.game (cf. render())\n\t\t\t.then(() => fetch(screenshotsApiUrl + apiKeyParam)) // appel AJAX screenshots\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tthis.screenshots = data;\n\t\t\t\tthis.render();\n\t\t\t\tthis.element.classList.remove('is-loading');\n\t\t\t});\n\t}\n\n\t/**\n\t * Méthode permettant de rendre le contenu de this.game et this.screenshots dans la vue.\n\t * Déclenchée une fois que les 2 appels AJAX sont terminés (detail + screenshots)\n\t * @see #show\n\t */\n\trender() {\n\t\tconst {\n\t\t\tslug,\n\t\t\tname,\n\t\t\tbackground_image,\n\t\t\treleased,\n\t\t\tmetacritic,\n\t\t\tdescription,\n\t\t\tparent_platforms,\n\t\t\tgenres,\n\t\t\twebsite,\n\t\t} = this.game;\n\t\tconst releasedDate = new Date(released);\n\t\t// rendu dans la vue\n\t\tthis.element.innerHTML = /*html*/ `\n\t\t\t<div class=\"backgroundImage\">\n\t\t\t\t<img src=\"${background_image}\" />\n\t\t\t</div>\n\t\t\t<header>\n\t\t\t\t<div class=\"breadcrumb\">\n\t\t\t\t\t<a href=\"/\">Tous les jeux</a>\n\t\t\t\t\t&gt;\n\t\t\t\t\t<a href=\"/detail-${slug}\">${name}</a>\n\t\t\t\t</div>\n\t\t\t\t<h2>\n\t\t\t\t\t${name}\n\t\t\t\t\t<span class=\"metacritic\">${metacritic}</span>\n\t\t\t\t</h2>\n\t\t\t</header>\n\t\t\t<section class=\"content\">\n\t\t\t\t<div class=\"screenshots\">\n\t\t\t\t\t${this.screenshots.results\n\t\t\t\t\t\t.map(({ image }) => `<a href=\"${image}\"><img src=\"${image}\" /></a>`)\n\t\t\t\t\t\t.join('')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"infos\">\n\t\t\t\t\t<p class=\"label\">Genres :</p>\n\t\t\t\t\t<ul class=\"genres\">${genres\n\t\t\t\t\t\t.map(genre => `<li>${genre.name}</li>`)\n\t\t\t\t\t\t.join('')}</ul>\n\t\t\t\t\t<p class=\"label\">Date de parution :</p>\n\t\t\t\t\t<time datetime=\"${released}\">${releasedDate.toLocaleDateString()}</time>\n\t\t\t\t\t<p class=\"label\">Plateformes :</p>\n\t\t\t\t\t<ul class=\"platforms\">${parent_platforms\n\t\t\t\t\t\t.map(\n\t\t\t\t\t\t\tparent =>\n\t\t\t\t\t\t\t\t`<li><img src=\"images/platforms/${parent.platform.slug}.svg\" /></li>`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join('')}</ul>\n\t\t\t\t\t<p class=\"label\">Site officiel :</p>\n\t\t\t\t\t<a class=\"website\" href=\"${website}\">${website}</a>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section class=\"description\">${description}</section>\n\t\t\t`;\n\n\t\t// écoute du clic sur les liens du \"fil d'Ariane\" pour éviter le rechargement de page\n\t\tthis.element.querySelectorAll('.breadcrumb a').forEach(link =>\n\t\t\tlink.addEventListener('click', event => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tRouter.navigate(event.currentTarget.getAttribute('href'));\n\t\t\t})\n\t\t);\n\t}\n}\n"],"names":["Router","setMenuElement","menuElement","this","querySelectorAll","forEach","link","addEventListener","event","preventDefault","linkHref","currentTarget","getAttribute","navigate","path","skipPushState","route","routes","find","endsWith","routePathStart","replace","startsWith","viewParam","currentRoute","view","hide","show","titleElement","innerHTML","title","previousMenuLink","querySelector","newMenuLink","classList","remove","add","window","history","pushState","View","constructor","element","API_KEY","document","helpView","super","handleSubmit","subjectInput","bodyTextarea","subject","value","body","location","href","encodeURIComponent","alert","gameListView","toggleSearchButton","toggleSearchForm","searchForm","handleSearchFormSubmit","renderGameList","search","ordering","disabled","setAttribute","fetch","then","response","json","data","html","results","game","releasedDate","Date","released","slug","background_image","name","toLocaleDateString","metacritic","renderGameThumbnail","gameLink","searchInput","orderingSelect","aboutView","text","responseText","showFileContent","handleButtonClick","gameDetailView","detailApiUrl","screenshotsApiUrl","apiKeyParam","screenshots","render","description","parent_platforms","genres","website","map","image","join","genre","parent","platform","pathname","onpopstate","console","log","toUpperCase"],"ignoreList":[],"sourceRoot":""}